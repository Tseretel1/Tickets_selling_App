<!--BAckgroundBlur-->
<div class="BAckgroundBlur"></div>

<!--Modal-->
<div class="ModalWindowParent" *ngIf="Modal">
  <div class="ModalWindow">
    <div class="CloseModal">
       <button class="cancel"  (click)="HideModal()"><mat-icon>close</mat-icon></button>
    </div>
    <p class="Question">{{matchingTicket.title}}</p>
    <div class="TicketModal">
      <img [src]="matchingTicket.photo" alt="" class="TicketImageModal">
    </div>
    <p class="Question"><mat-icon>calendar_today </mat-icon> {{ matchingTicket.activation_Date | date: 'MMM d' }}</p>
    <div class="modalButtonAlign">
      <form [formGroup]="SellingForm" class="sellingForm">
        <div class="input-container">
          <button class="decrement-button" (click)="decrement()">-</button>
          <div class="countDisplay">
            <mat-icon>confirmation_number</mat-icon>
            <input 
              type="number" 
              formControlName="TicketCount" 
              class="sellinginput" 
              [value]="ticketCount" 
              readonly
            />
          </div>
          <button class="increment-button" (click)="increment()">+</button>
        </div>
        
      </form>
      <button class="submitbuttons buy" (click)="BuyTicket()"><span class="text">Ticket {{SellingForm.value.TicketCount}} : Price<p class="price">{{matchingTicket.price * SellingForm.value.TicketCount}}$</p> </span></button>
    </div>
  </div>
</div> 


<!--Little Modal-->
<div class="SmallModalParent" *ngIf="SmallModal">
  <div class="SmallModal">
    <p class="SmallmodalText">{{SmallModalText}}</p>
  </div>
</div>

<div class="CenterBody">
    <div class="FountTicketParent" *ngIf="matchingTicket">
        <div class="foundticket">
          <div class="Imagecontainer heightzero">
            <button class="Exitbutton" (click)="Exit()"><mat-icon class="flipicon">exit_to_app</mat-icon>Back</button>
            <div class="publisher">
              <img [src]="matchingTicket.publisher.logo" class="publisherPhoto" alt="">
              <p class="publisherName">{{matchingTicket.publisher.userName}}</p>
            </div>
          </div>
            <div class="FirstSection">
               <div class="Imagecontainer">
                 <img [src]="matchingTicket.photo" alt="" class="TicketImage">
               </div>
            </div>
        </div>
        <div class="datetimeparent">
          <div class="dataalign">
            <p class="Title">{{matchingTicket.title}}</p>
          </div>
          <div class="dateflex">
            <p class="Datetime"><mat-icon>calendar_today </mat-icon> {{ matchingTicket.activation_Date | date: 'MMM d' }}</p>
            <p class="Datetime">|</p>
            <p class="Datetime DatetimeHour"><mat-icon>access_time </mat-icon> {{ matchingTicket.activation_Date | date: 'h:mm a' }}</p>
          </div>
        </div>  
        <div class="Ticket_Information" *ngIf="matchingTicket.ticketCount > 0">
          <div class="SecondSection">   
            <div class="matchingticketData">
            </div>
            <div class="Description"><p class="Datatitle"> Price:</p>  <p>{{matchingTicket.price}}</p> </div>

            <div class="descriptionCenter">
              <div class="Description"><p class="Datatitle"> Description:</p>  <p>{{matchingTicket.description}}</p> </div>
            </div>
          </div>
          <button 
          class="fancy" 
          href="#" 
          (click)="ShowModal()" 
          [attr.disabled]="!isTicketAvailable ? true : null"
          [ngClass]="{'disabled_button': !isTicketAvailable}">
          <span class="top-key"></span>
          <span class="text">Buy Ticket {{matchingTicket.price}}$</span>
          <span class="bottom-key-1"></span>
          <span class="bottom-key-2"></span>
        </button>
        
           <div class="TicketLeft">
            <p class="">Ticket Left: {{matchingTicket.ticketCount}}</p>     
          </div>  
        </div>
        <div class="Ticket_Information TktSoldout" *ngIf="matchingTicket.ticketCount <= 0">
           sold out!
        </div>
        
   </div> 

   
   <div class="sugestions" *ngIf="foundtickets"> 
    <p class="SugestionsText">Sugestions from</p>
    <div class="Ticket_parent">
      <div class="Ticket" *ngFor="let tkt of foundtickets; let i = index">
        <div class="TicketFlex" (click)="NewMatchingTicket(tkt.id)">
            <div class="leftSide">
                <div class="TicketImageContainer">
                    <img [src]="tkt.photo" alt="" class="ticketimage">
                </div>
                <div class="titlecenter">
                  <p class="Ticket_Title"> {{tkt.title}}</p> 
              </div>
            </div>
        </div>
      </div>    
     </div> 
   </div>
</div>
